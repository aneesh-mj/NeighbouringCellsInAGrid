<!DOCTYPE HTML>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Your Website</title>
</head>

<body>


    <script>

        class Cell {
            constructor(id, value) {
                this.id = id;
                this.value = value;
                this.children = [];
            }

            getDOMNode() {
                const cell = document.createElement("div");
                cell.classList.add('cell');
                return cell;
            }
        }


        class Grid {

            constructor(arr, container) {
                this.array = arr;
                this.container = container;
            }

            

        }

        const grid = [
            [0, 0, 0, 0, 1],
            [1, 1, 0, 0, 0],
            [1, 1, 0, 1, 1],
            [0, 0, 0, 0, 0],
            [1, 1, 1, 0, 0],
        ];




        const generateGrid = () => {
            const objMap = {};
            for (let i = 0; i < grid.length; i++) {
                for (let j = 0; j < grid[i].length; j++) {
                    const id = `cell_${i}_${j}`;
                    const value = grid[i][j];

                    if (!objMap[id] && value) {
                        objMap[id] = new Cell(id, value);
                    }

                    const topValue = grid[i - 1] && grid[i - 1][j];
                    const top_id = `cell_${i - 1}_${j}`;


                    const leftValue = grid[i][j - 1];
                    const left_id = `cell_${i}_${j - 1}`;

                    if (value) {
                        if (topValue) {
                            objMap[id].children.push(objMap[top_id]);
                            objMap[top_id].children.push(objMap[id]);

                        }

                        if (leftValue) {
                            objMap[left_id].children.push(objMap[id]);
                            objMap[id].children.push(objMap[left_id]);

                        }
                    }

                }
            }

            return objMap;
        }




        const objMap = generateGrid();
        console.log(objMap);


        const getNeighbours = (obj, map) => {

            if (!map[obj.id]) {
                map[obj.id] = obj;
                if (obj.children && obj.children.length) {
                    obj.children.map(c => getNeighbours(c, map));
                }
            }
        }



        Object.keys(objMap).map(o => {
            let m = {};
            getNeighbours(objMap[o], m);
            console.log(m);
        })

        // console.log(getNeighbours());

    </script>
</body>

</html>